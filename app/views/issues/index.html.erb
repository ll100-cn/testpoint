<div class="page-header">
  <h2><%= page_i18n :index, model_name: h(@issues) %></h2>
  <div class="ml-3 actions">
    <%= link_to h(Label), project_labels_path(@project) %>
  </div>
</div>

<div class="d-flex align-items-center justify-content-between">
  <%= backend_search_form_for @q do |f| %>
      <%= f.input :labels_id_eq, collection: @project.labels.all.map {|l| [l.name, l.id]}, input_html: { class: 'select2.field' } %>
      <%= f.input :milestone_id_eq, collection: @project.milestones.all.map {|m| [m.title, m.id]}, input_html: { class: 'select2.field' } %>
      <%= f.submit class: "btn btn-outline-primary btn-sm mb-2" %>
  <% end %>

  <%= fume_nav @q.state_eq do |n| %>
    <div class="btn-group btn-group-sm mb-2 ml-2" role="group">
      <%= n.link_to nil, page_i18n(:all), current_url(q: { state_eq: nil }), class: "btn btn-outline-primary" %>
      <% Issue.state.values.each do |value| %>
        <%= n.link_to value, value.text, current_url(q: { state_eq: value }), class: "btn btn-outline-primary" %>
      <% end %>
    </div>
  <% end %>
</div>

<table class="table">
  <colgroup>
    <col width="15%"/>
    <col width="30%"/>
    <col width="15%"/>
    <col width="10%"/>
    <col width="20%"/>
    <col width="10%"/>
  </colgroup>
    <tr>
      <th><%= sort_link(@q, :title)%></th>
      <th><%= sort_link(@q, :label_ids)%></th>
      <th><%= sort_link(@q, :milestone_id)%></th>
      <th><%= sort_link(@q, :creator_id)%></th>
      <th><%= sort_link(@q, :created_at)%></th>
      <th><%= sort_link(@q, :state)%></th>
    </tr>
  </thead>
  <tbody>
    <% @issues.each do |issue| %>
      <tr>
        <td>
          <%= link_to issue.title, [@project, issue] %>
        </td>
        <td>
          <% issue.labels.each do |label| %>
              <%= issue_label(label) %>
          <% end %>
        </td>
        <td>
          <% if issue.milestone %>
            <%= issue.milestone.title %>
          <% end %>
        </td>
<<<<<<< 26e97bcced77583c0ffc1a5dc9ce253a43709a5d
        <td><%= issue.creator.name %></td>
=======
        <td><%= issue.creator_id %></td>
>>>>>>> add project
        <td><%=l issue.created_at, format: :long %></td>
        <td>
          <span class="<%= issue_state_class_name(issue.state, :text) %>">
          <%= issue.state.text %>
          </span>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<nav class="table-pagination">
  <%= paginate @issues %>
</nav>
